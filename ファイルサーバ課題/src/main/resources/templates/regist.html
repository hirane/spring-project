<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>ユーザ登録</title>
<style>
 .err{
 color:red;
 }
</style>
</head>
<body>
  <p class="err" th:if="${isErr}" th:text="${errMsg}"></p>

  <form name="registForm" action="/regist" method="POST" th:object="${userForm}">
    <ul>
	  <li>
        <label for="userId">ユーザID(メールアドレス)</label>
        <div><input id="userId" type="email" name="userId" th:value="*{userId}" placeholder="E-Mail形式で半角英数字254文字以内"></div>
        <div class="err" th:if="${#fields.hasErrors('userId')}" th:errors="*{userId}" th:errorclass="err" ></div>
      </li>

	  <li>
        <label for="userName">ユーザ名</label>
        <div><input id="userName" type="text" name="userName" th:value="*{userName}" placeholder="半角英数字32文字以内"></div>
        <div class="err" th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}" th:errorclass="err" ></div>
	  </li>

	  <li>
        <label for="password">パスワード</label>
        <div><input id="password" type="password" name="password" placeholder="半角英数字32文字以内"></div>
        <div class="err" th:if="${#fields.hasErrors('password')}" th:errors="*{password}" th:errorclass="err" ></div>
  	  </li>

	  <li>
        <label for="conPassword">確認用パスワード</label>
        <div><input id="conPassword" type="password" name="conPassword" placeholder="半角英数字32文字以内"></div>
        <div class="err" th:if="${#fields.hasErrors('conPassword')}" th:errors="*{conPassword}" th:errorclass="err" ></div>
     </li>
   </ul>
   <input type="button" value="戻る">
   <input type="submit" value="登録">
  </form>

  <script type="text/javascript" th:inline="javascript">
    /* コントローラから登録完了フラグを取得してメッセージ出力 */
    if(/*[[${isRegistered}]]*/){
      alert("登録が完了しました。");
      location.href = "http://localhost:8080/fileView";
    }
  </script>

</body>
</html>